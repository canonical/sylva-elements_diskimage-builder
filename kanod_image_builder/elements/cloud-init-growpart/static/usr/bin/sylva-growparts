#!/bin/sh

growpart $(pvs | tail -n +2 | awk '{print $1}' | sed 's/\(\/dev\/[sv]d[a-z]\)\([0-9]\)/\1 \2/')
pvresize $(pvs | tail -n +2 | awk '{print $1}')
lvextend /dev/vg/lv_var -l 5%VG
lvextend /dev/vg/lv_home -l 5%VG
lvextend /dev/vg/lv_tmp -l 5%VG
lvextend /dev/vg/lv_vartmp -l 5%VG
lvextend /dev/vg/lv_varlog -l 5%VG
lvextend /dev/vg/lv_varlogaudit -l 5%VG
lvextend /dev/vg/lv_k8s -l 60%VG
resize2fs /dev/vg/lv_var
resize2fs /dev/vg/lv_home
resize2fs /dev/vg/lv_tmp
resize2fs /dev/vg/lv_vartmp
resize2fs /dev/vg/lv_varlog
resize2fs /dev/vg/lv_varlogaudit
resize2fs /dev/vg/lv_k8s
